<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="225px" preserveAspectRatio="none" style="width:994px;height:225px;" version="1.1" viewBox="0 0 994 225" width="994px" zoomAndPan="magnify"><defs><filter height="300%" id="f1sqrw6hs45m0s" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="203" x2="203" y1="38.2969" y2="184.8281"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="651.5" x2="651.5" y1="38.2969" y2="184.8281"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="808.5" x2="808.5" y1="38.2969" y2="184.8281"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="936.5" x2="936.5" y1="38.2969" y2="184.8281"/><rect fill="#FEFECE" filter="url(#f1sqrw6hs45m0s)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="41" x="181" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="27" x="188" y="22.9951">App</text><rect fill="#FEFECE" filter="url(#f1sqrw6hs45m0s)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="41" x="181" y="183.8281"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="27" x="188" y="203.8232">App</text><rect fill="#FEFECE" filter="url(#f1sqrw6hs45m0s)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="156" x="571.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="142" x="578.5" y="22.9951">LocalAssetsManager</text><rect fill="#FEFECE" filter="url(#f1sqrw6hs45m0s)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="156" x="571.5" y="183.8281"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="142" x="578.5" y="203.8232">LocalAssetsManager</text><rect fill="#FEFECE" filter="url(#f1sqrw6hs45m0s)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="130" x="741.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="116" x="748.5" y="22.9951">ContentManager</text><rect fill="#FEFECE" filter="url(#f1sqrw6hs45m0s)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="130" x="741.5" y="183.8281"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="116" x="748.5" y="203.8232">ContentManager</text><rect fill="#FEFECE" filter="url(#f1sqrw6hs45m0s)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="98" x="885.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="84" x="892.5" y="22.9951">AVURLAsset</text><rect fill="#FEFECE" filter="url(#f1sqrw6hs45m0s)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="98" x="885.5" y="183.8281"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="84" x="892.5" y="203.8232">AVURLAsset</text><polygon fill="#A80036" points="639.5,65.4297,649.5,69.4297,639.5,73.4297,643.5,69.4297" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="203.5" x2="645.5" y1="69.4297" y2="69.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="424" x="210.5" y="64.3638">mediaSource = getPreferredDownloadableMediaSource(for: entry)</text><polygon fill="#A80036" points="924.5,94.5625,934.5,98.5625,924.5,102.5625,928.5,98.5625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="203.5" x2="930.5" y1="98.5625" y2="98.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="255" x="210.5" y="93.4966">avAsset = init(mediaSource.contentUrl)</text><polygon fill="#A80036" points="639.5,123.6953,649.5,127.6953,639.5,131.6953,643.5,127.6953" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="203.5" x2="645.5" y1="127.6953" y2="127.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="422" x="210.5" y="122.6294">prepareForDownload(asset: avAsset, mediaSource: mediaSource)</text><path d="M8,140.6953 L8,165.6953 L396,165.6953 L396,150.6953 L386,140.6953 L8,140.6953 " fill="#FBFB77" filter="url(#f1sqrw6hs45m0s)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M386,140.6953 L386,150.6953 L396,150.6953 L386,140.6953 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="367" x="14" y="157.7622">Create and start an AVAssetDownloadTask (out of scope)</text><!--
@startuml 

participant App
participant LocalAssetsManager as LAM
participant ContentManager as CM

App->LAM: mediaSource = getPreferredDownloadableMediaSource(for: entry)
App->AVURLAsset: avAsset = init(mediaSource.contentUrl)
App->LAM: prepareForDownload(asset: avAsset, mediaSource: mediaSource)
note over App: Create and start an AVAssetDownloadTask (out of scope)

@enduml

PlantUML version 1.2019.03(Sun Mar 10 07:04:44 EDT 2019)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.7.0_131-b00
Operating System: Linux
OS Version: 3.13.0-76-generic
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>