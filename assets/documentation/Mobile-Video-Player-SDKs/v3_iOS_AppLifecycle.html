  <title>VPaaS - Video Platform as a Service | Kaltura</title>

  <meta name="description" content="VPaaS allows you to build cloud video services, supplies SDKs, and works on all devices, media workflows, and applications. Pay as you go. 
">
    <meta property="st:title" content="" >
    <meta property="st:published_at" content="">
  <!--link rel="stylesheet" href="/css/main.css"-->
  <!--link rel="canonical" href="http://localhost:4000/documentation/Mobile-Video-Player-SDKs/v3_iOS_AppLifecycle.html">
  <link rel="alternate" type="application/rss+xml" title="VPaaS - Video Platform as a Service | Kaltura" href="http://localhost:4000/feed.xml">
<link rel="sitemap" type="application/xml" title="Sitemap" href="http://localhost:4000/sitemap.xml" />
  
<link rel="stylesheet" type="text/css" href="http://localhost:4000/css/normalize.css">
<link rel="stylesheet" type="text/css" href="http://localhost:4000/css/webflow.css">
<link rel="stylesheet" type="text/css" href="http://localhost:4000/css/kaltura-dev-site.webflow.css">
<link rel="stylesheet" type="text/css" href="http://localhost:4000/css/syntax.css">
<link rel="stylesheet" type="text/css" href="http://localhost:4000/css/opentip.css">
<link rel="stylesheet" type="text/css" href="http://localhost:4000/css/moving-logo.css"-->

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
<script>
window.jQuery = window.jquery;
</script>
<!--script type="text/javascript" src="assets/js/jekyll-code-example-buttons.js"></script-->
<!--link rel="stylesheet" href="/css/highlightjs.css"-->
    <!--script src="assets/js/highlight.pack.js"></script-->
    <script>hljs.initHighlightingOnLoad();</script>
    
  <!--script type="text/javascript" src="https://use.typekit.net/rlx4cjm.js"></script-->
  <script type="text/javascript">
    try{Typekit.load();}catch(e){}
  </script>
  <!--script type="text/javascript" src="assets/js/modernizr.js"></script-->
  <link rel="apple-touch-icon" href="https://daks2k3a4ib2z.cloudfront.net/img/webclip.png">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
  <script type="text/javascript">
    var switchTo5x=true;
  </script>
  <script type="text/javascript">var switchTo5x=true;</script>

  
<!--script src="assets/js/country.js"></script-->

<!--script type="text/javascript" src="assets/js/jQuery.exLink/jquery.exLink.js"></script-->
<!--link rel="stylesheet" type="text/css" href="assets/js/jQuery.exLink/jquery.exLink.css"-->
<script type="text/javascript">
exLink.init({
    	parentElementPath: '.template-page-content-column .post-content',
 	linkWarning: false,
	hostCompare: true,
	noFollow: false,
	fancyBoxIgnore: true,
	gaTracking: true,
	gaTrackLabel: 'External Links',
	gaTrackOld: false,
	fileWarning: false
    });
	//turn all headings into clicable anchors:
    /*
	$('.post-content h1, .post-content h2, .post-content h3, .post-content h4, .post-content h5, .post-content h6').filter('[id]').each(function () {
	    $(this).html('<a href="#'+$(this).attr('id')+'" class="post-content" aria-hidden="true">'+$(this).text()+'</a>');
	});
	

	//build the "on this page" menu:
	var ToC =
	  "<nav role='navigation' class='table-of-contents'>" +
	    "<h2>On this page:</h2>" +
	    "<ul>";
	
	var newLine, el, title, link;
	var hasHeaders = false;
	$('.post-content h2').each(function() {
	  hasHeaders = true;
	  el = $(this);
	  title = el.text();
	  link = "documentation/Mobile-Video-Player-SDKs/v3_iOS_AppLifecycle.md#" + el.attr("id");
	
	  newLine =
	    "<li>" +
	      "<a href='" + link + "'>" +
	        title +
	      "</a>" +
	    "</li>";
	
	  ToC += newLine;
	
	});
	
	ToC +=
	   "</ul>" +
	  "</nav>";
	
	if (hasHeaders) $("div.post-content").prepend(ToC);
	*/
    	
	//back to top
	if ($('#back-to-top').length) {
    		var scrollTrigger = 100, // px
	        backToTop = function () {
	            var scrollTop = $(window).scrollTop();
	            if (scrollTop > scrollTrigger) {
	                $('#back-to-top').addClass('show');
	            } else {
	                $('#back-to-top').removeClass('show');
	            }
	        };
	    backToTop();
	    $(window).on('scroll', function () {
	        backToTop();
	    });
	    $('#back-to-top a:first-child').on('click', function (e) {
	        e.preventDefault();
	        $('html,body').animate({
	            scrollTop: 0
	        }, 700);
	    });
	}

</script>

<script src='https://www.google.com/recaptcha/api.js'></script>
<script>
function verify_recapcha()
{
	var isCaptchaValidated = false;
	var response = grecaptcha.getResponse();
	if(response.length == 0) {
	    isCaptchaValidated = false;
	    alert('Please confirm that you are a Human.');
	    return false;
	} else {
	    return true;
	}

}
</script>
<!--script type="text/javascript" src="assets/js/webflow.js"></script>
<script type="text/javascript" src="assets/js/opentip-jquery.js"></script-->
    <!--script type="text/javascript">
      window.heap=window.heap||[],heap.load=function(e,t){window.heap.appid=e,window.heap.config=t=t||{};var r=t.forceSSL||"https:"===document.location.protocol,a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src="https://cdn.heapanalytics.com/js/heap-"+e+".js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(a,n);for(var o=function(e){return function(){heap.push([e].concat(Array.prototype.slice.call(arguments,0)))}},p=["addEventProperties","addUserProperties","clearEventProperties","identify","removeEventProperty","setEventProperties","track","unsetEventProperty"],c=0;c<p.length;c++)heap[p[c]]=o(p[c])};
        heap.load("176893769");
  </script-->

<!--link rel="stylesheet" type="text/css" href="assets/css/lity.min.css"-->
<!--script type="text/javascript" src="assets/js/lity.min.js"></script-->

  <!-- RTP tag -->
<script type='text/javascript'>
(function(c,h,a,f,i,e){c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
c[a].a=i;c[a].e=e;var g=h.createElement("script");g.async=true;g.type="text/javascript";
g.src=f+'?aid='+i;var b=h.getElementsByTagName("script")[0];b.parentNode.insertBefore(g,b);
})(window,document,"rtp","https://sjrtp3-cdn.marketo.com/rtp-api/v1/rtp.js","kaltura");
rtp('send','view');
rtp('get', 'campaign',true);
</script>
<!-- End of RTP tag -->




    <div class="page-content">
      <div class="wrapper">
          <!--link rel="stylesheet" href="/site.css"-->
<article>


<div class="w-section side-nav-section">
    <div class="w-container">
      <!--a href="#" data-ix="show-temp-page-nav-column" class="w-button w-clearfix mobilebtn">Topics<span class="fa fa-chevron-down" style="null"></span></a-->
      <div class="w-row body-columns">
        <div class="docs-contents">
          <div class="post-header">

            <!-- INSERT JEKYLL CONTENT HERE -->

          	<header class="post-header">
    			<h1 class="post-title"></h1>
  			</header>

			
			
			<div class="lastcommittable">
				<span>Updated: Tue Jan 31 08:04:20 2017</span>, By <span class="commit-author">Jess Portnoy</span> <a class="editgithub" href="https://github.com/kaltura/developer-platform-docs/tree/master/documentation/Mobile-Video-Player-SDKs/v3_iOS_AppLifecycle.md" target="_blank">Contribute to this page</a>
				<!--tr><td>Created on: Wed Jan 18 11:49:21 2017, By: Eliza Sapir</td></tr-->
				<!--tr><td>Last commit: Tue Jan 31 08:04:20 2017, By <span class="commit-author">Jess Portnoy</span></td></tr-->
			
				<!-- 
				
				<tr>
					<td>AnnaAleksandrowicz (6 commits) (<a href="mailto:Anna.Aleksandrowicz@kaltura.com">Anna.Aleksandrowicz@kaltura.com</a>)</td>
				</tr> -->

				<!-- 
				
				<tr>
					<td>Eliza Sapir (1 commits) (<a href="mailto:eliza.sapir@kaltura.com">eliza.sapir@kaltura.com</a>)</td>
				</tr> -->

				<!-- 
				
				<tr>
					<td>Gal Orlanczyk (5 commits) (<a href="mailto:gal.orlanczyk@kaltura.com">gal.orlanczyk@kaltura.com</a>)</td>
				</tr> -->

				<!-- 
				
				<tr>
					<td>Jess Portnoy (2 commits) (<a href="mailto:jess.portnoy@kaltura.com">jess.portnoy@kaltura.com</a>)</td>
				</tr> -->

				<!--  -->

			</div>

			

		</div>

            <div class="post-content">
    		
    		<h2 id="application-lifecycle">Application Lifecycle</h2>

<p>The following section details the iOS application lifecycle.</p>

<h3 id="application-state-changes">Application State Changes</h3>

<p>The framework observes application state changes internally to provide better handling.</p>

<p>Handled events:</p>
<ul>
  <li><em>On</em> will terminate the event:
    <ul>
      <li>Post analytics “stop” event.</li>
    </ul>
  </li>
</ul>

<h4 id="playing-media-while-in-background">Playing Media While in Background</h4>

<ul>
  <li><strong>Enabling your application to play audible content while in the background</strong>. To enable your application to play audible content while in the background, enable this option in the application background modes section or info.plist.</li>
  <li><strong>Setting the audio session category</strong>. To continue playing media while in the background, you must set an audio session category with background playback (for example: AVAudioSessionCategoryPlayback).</li>
</ul>

<blockquote>
  <p>swift</p>
</blockquote>

<div class="language-swift highlighter-rouge"><pre class="highlight"><code><span class="kd">import</span> <span class="kt">AVFoundation</span>
<span class="kd">import</span> <span class="kt">AudioToolbox</span>

<span class="k">let</span> <span class="nv">audioSession</span> <span class="o">=</span> <span class="kt">AVAudioSession</span><span class="o">.</span><span class="nf">sharedInstance</span><span class="p">()</span>

<span class="k">do</span> <span class="p">{</span>
    <span class="k">try</span> <span class="n">audioSession</span><span class="o">.</span><span class="nf">setCategory</span><span class="p">(</span><span class="kt">AVAudioSessionCategoryPlayback</span><span class="p">)</span>
<span class="p">}</span> <span class="k">catch</span> <span class="k">let</span> <span class="nv">error</span> <span class="k">as</span> <span class="kt">NSError</span> <span class="p">{</span>
    <span class="c1">// handle the error condition</span>
<span class="p">}</span>

<span class="k">do</span> <span class="p">{</span>
    <span class="k">try</span> <span class="n">audioSession</span><span class="o">.</span><span class="nf">setActive</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span>
<span class="p">}</span> <span class="k">catch</span> <span class="k">let</span> <span class="nv">error</span> <span class="k">as</span> <span class="kt">NSError</span> <span class="p">{</span>
    <span class="c1">// handle the error condition</span>
<span class="p">}</span>
</code></pre>
</div>
<blockquote>
  <p>objc</p>
</blockquote>

<div class="language-objc highlighter-rouge"><pre class="highlight"><code><span class="cp">#import &lt;AVFoundation/AVFoundation.h&gt;
#import &lt;AudioToolbox/AudioToolbox.h&gt;
</span> 
<span class="n">AVAudioSession</span> <span class="o">*</span><span class="n">audioSession</span> <span class="o">=</span> <span class="p">[</span><span class="n">AVAudioSession</span> <span class="nf">sharedInstance</span><span class="p">];</span>
 
<span class="n">NSError</span> <span class="o">*</span><span class="n">setCategoryError</span> <span class="o">=</span> <span class="nb">nil</span><span class="p">;</span>
<span class="n">BOOL</span> <span class="n">success</span> <span class="o">=</span> <span class="p">[</span><span class="n">audioSession</span> <span class="nf">setCategory</span><span class="p">:</span><span class="n">AVAudioSessionCategoryPlayback</span> <span class="nf">error</span><span class="p">:</span><span class="o">&amp;</span><span class="n">setCategoryError</span><span class="p">];</span>
<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">success</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/* handle the error condition */</span> <span class="p">}</span>
 
<span class="n">NSError</span> <span class="o">*</span><span class="n">activationError</span> <span class="o">=</span> <span class="nb">nil</span><span class="p">;</span>
<span class="n">success</span> <span class="o">=</span> <span class="p">[</span><span class="n">audioSession</span> <span class="nf">setActive</span><span class="p">:</span><span class="nb">YES</span> <span class="nf">error</span><span class="p">:</span><span class="o">&amp;</span><span class="n">activationError</span><span class="p">];</span>
<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">success</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/* handle the error condition */</span> <span class="p">}</span>
</code></pre>
</div>

<p><strong>Special considerations for video media</strong>. If the current item is displaying video, playback of the player is automatically paused when the application is sent to the background. To prevent this pause from occurring, you’ll need to set the player of an AVPlayerLayer to <em>nil</em>.</p>

<blockquote>
  <p>swift</p>
</blockquote>

<div class="language-swift highlighter-rouge"><pre class="highlight"><code><span class="c1">// Remove the AVPlayerLayer from its associated AVPlayer once the app is in the background.</span>
<span class="kd">func</span> <span class="nf">applicationDidEnterBackground</span><span class="p">(</span><span class="n">_</span> <span class="nv">application</span><span class="p">:</span> <span class="kt">UIApplication</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">playerView</span> <span class="o">=</span> <span class="o">&lt;</span><span class="err">#</span><span class="kt">Get</span> <span class="n">your</span> <span class="n">player</span> <span class="n">view</span><span class="err">#</span><span class="o">&gt;</span>
    <span class="n">playerView</span><span class="o">.</span><span class="n">playerLayer</span><span class="o">.</span><span class="n">player</span> <span class="o">=</span> <span class="kc">nil</span>
<span class="p">}</span>

<span class="c1">// Restore the AVPlayer when the app is active again.</span>
<span class="kd">func</span> <span class="nf">applicationDidBecomeActive</span><span class="p">(</span><span class="n">_</span> <span class="nv">application</span><span class="p">:</span> <span class="kt">UIApplication</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">playerView</span> <span class="o">=</span> <span class="o">&lt;</span><span class="err">#</span><span class="kt">Get</span> <span class="n">your</span> <span class="n">player</span> <span class="n">view</span><span class="err">#</span><span class="o">&gt;</span>
    <span class="n">playerView</span><span class="o">.</span><span class="n">playerLayer</span><span class="o">.</span><span class="n">player</span> <span class="o">=</span> <span class="n">player</span>
<span class="p">}</span>
</code></pre>
</div>
<blockquote>
  <p>objc</p>
</blockquote>

<div class="language-objc highlighter-rouge"><pre class="highlight"><code><span class="c1">// Remove the AVPlayerLayer from its associated AVPlayer once the app is in the background.
</span><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">applicationDidEnterBackground</span><span class="p">:(</span><span class="n">UIApplication</span> <span class="o">*</span><span class="p">)</span><span class="nv">application</span> <span class="p">{</span>
  <span class="n">MyPlayerLayerView</span> <span class="o">*</span><span class="n">playerView</span> <span class="o">=</span> <span class="o">&lt;</span><span class="err">#</span><span class="n">Get</span> <span class="n">your</span> <span class="n">player</span> <span class="n">view</span><span class="err">#</span><span class="o">&gt;</span><span class="p">;</span>
  <span class="p">[[</span><span class="n">playerView</span> <span class="nf">playerLayer</span><span class="p">]</span> <span class="nf">setPlayer</span><span class="p">:</span><span class="nb">nil</span><span class="p">];</span> <span class="c1">// remove the player
</span><span class="p">}</span>
 
<span class="c1">// Restore the AVPlayer when the app is active again.
</span><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">applicationDidBecomeActive</span><span class="p">:(</span><span class="n">UIApplication</span> <span class="o">*</span><span class="p">)</span><span class="nv">application</span> <span class="p">{</span>
  <span class="n">MyPlayerLayerView</span> <span class="o">*</span><span class="n">playerView</span> <span class="o">=</span> <span class="o">&lt;</span><span class="err">#</span><span class="n">Get</span> <span class="n">your</span> <span class="n">player</span> <span class="n">view</span><span class="err">#</span><span class="o">&gt;</span><span class="p">;</span>
  <span class="p">[[</span><span class="n">playerView</span> <span class="nf">playerLayer</span><span class="p">]</span> <span class="nf">setPlayer</span><span class="p">:</span><span class="n">_player</span><span class="p">];</span> <span class="c1">// restore the player
</span><span class="p">}</span>
</code></pre>
</div>

<blockquote>
  <p>Note: For more information about playing media while the application runs in the background see the <a href="https://developer.apple.com/library/content/qa/qa1668/_index.html">Apple Developer Site</a>.</p>
</blockquote>

<h3 id="connectivity">Connectivity</h3>

<p>Connectivity changes are observed internally to provide better handling when no network connection is available.<br />
Whenever network reachability changes, an error event will be sent with an NSError inside.<br />
The player begins listening to changes when starting to load the asset, and stops when the player is deinitialized.<br />
If more than one player is used, the network reachability notifications will stop only after all of the players are deinitialized.</p>

<p>To observe errors (not just reachability), add an observer for error type and use the error accessor on the event.</p>
<blockquote>
  <p>swift</p>
</blockquote>

<div class="language-swift highlighter-rouge"><pre class="highlight"><code><span class="n">player</span><span class="o">.</span><span class="nf">addObserver</span><span class="p">(</span><span class="k">self</span><span class="p">,</span> <span class="nv">events</span><span class="p">:</span> <span class="p">[</span><span class="kt">PlayerEvent</span><span class="o">.</span><span class="n">error</span><span class="p">])</span> <span class="p">{</span> <span class="n">event</span> <span class="k">in</span>
    <span class="k">let</span> <span class="nv">error</span><span class="p">:</span> <span class="kt">NSError</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">error</span> <span class="c1">// on unreachable event receive NSError with relevant data</span>
<span class="p">}</span>
</code></pre>
</div>
<blockquote>
  <p>objc</p>
</blockquote>

<div class="language-objc highlighter-rouge"><pre class="highlight"><code><span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">player</span> <span class="nf">addObserver</span><span class="p">:</span><span class="n">self</span> <span class="nf">events</span><span class="p">:@[</span><span class="n">PlayerEvent</span><span class="p">.</span><span class="n">error</span><span class="p">]</span> <span class="n">block</span><span class="o">:^</span><span class="p">(</span><span class="n">PKEvent</span> <span class="o">*</span> <span class="n">_Nonnull</span> <span class="n">event</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">NSError</span> <span class="o">*</span><span class="n">error</span> <span class="o">=</span> <span class="n">event</span><span class="p">.</span><span class="n">error</span><span class="p">;</span>
<span class="p">}];</span>
</code></pre>
</div>

<h2 id="have-questions-or-need-help">Have Questions or Need Help?</h2>

<p>Check out the <a href="https://forum.kaltura.org/c/playkit">Kaltura Player SDK Forum</a> page for different ways of getting in touch.</p>

		
</article>


      </div>
    </div>

<!-- customer.io -->
<!--script type="text/javascript">
    var _cio = _cio || [];
    (function() {
      var a,b,c;a=function(f){return function(){_cio.push([f].
      concat(Array.prototype.slice.call(arguments,0)))}};b=["load","identify",
      "sidentify","track","page"];for(c=0;c<b.length;c++){_cio[b[c]]=a(b[c])};
      var t = document.createElement('script'),
          s = document.getElementsByTagName('script')[0];
      t.async = true;
      t.id    = 'cio-tracker';
      t.setAttribute('data-site-id', 'd52b0167909beb4a2cf0');
      t.src = 'https://assets.customer.io/assets/track.js';
      s.parentNode.insertBefore(t, s);
    })();
  </script-->
  <!-- marketo -->
  <script type="text/javascript">
(function() {
  var didInit = false;
  function initMunchkin() {
    if(didInit === false) {
      didInit = true;
      Munchkin.init('984-SDM-859');
    }
  }
  var s = document.createElement('script');
  s.type = 'text/javascript';
  s.async = true;
  s.src = 'https://munchkin.marketo.net/munchkin.js';
  s.onreadystatechange = function() {
    if (this.readyState == 'complete' || this.readyState == 'loaded') {
      initMunchkin();
    }
  };
  s.onload = initMunchkin;
  document.getElementsByTagName('head')[0].appendChild(s);
})();
</script>

<!--script type="text/javascript" src="https://s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5745bb1095edd5f5"></script-->
