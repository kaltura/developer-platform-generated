  <title>Ads</title>

  <meta name="description" content="VPaaS allows you to build cloud video services, supplies SDKs, and works on all devices, media workflows, and applications. Pay as you go. 
">
    <meta property="st:title" content="Ads" >
    <meta property="st:published_at" content="">

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
<script>
window.jQuery = window.jquery;
</script>
  <script type="text/javascript">
    try{Typekit.load();}catch(e){}
  </script>
  <link rel="apple-touch-icon" href="https://daks2k3a4ib2z.cloudfront.net/img/webclip.png">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
  <script type="text/javascript">
    var switchTo5x=true;
  </script>
  <script type="text/javascript">var switchTo5x=true;</script>

  
<script type="text/javascript">
    	
	//back to top
	if ($('#back-to-top').length) {
    		var scrollTrigger = 100, // px
	        backToTop = function () {
	            var scrollTop = $(window).scrollTop();
	            if (scrollTop > scrollTrigger) {
	                $('#back-to-top').addClass('show');
	            } else {
	                $('#back-to-top').removeClass('show');
	            }
	        };
	    backToTop();
	    $(window).on('scroll', function () {
	        backToTop();
	    });
	    $('#back-to-top a:first-child').on('click', function (e) {
	        e.preventDefault();
	        $('html,body').animate({
	            scrollTop: 0
	        }, 700);
	    });
	}

</script>

<script src='https://www.google.com/recaptcha/api.js'></script>
<script>
function verify_recapcha()
{
	var isCaptchaValidated = false;
	var response = grecaptcha.getResponse();
	if(response.length == 0) {
	    isCaptchaValidated = false;
	    alert('Please confirm that you are a Human.');
	    return false;
	} else {
	    return true;
	}

}
</script>
<!--script type="text/javascript" src="assets/js/webflow.js"></script>
<script type="text/javascript" src="assets/js/opentip-jquery.js"></script-->
    <!--script type="text/javascript">
      window.heap=window.heap||[],heap.load=function(e,t){window.heap.appid=e,window.heap.config=t=t||{};var r=t.forceSSL||"https:"===document.location.protocol,a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src="https://cdn.heapanalytics.com/js/heap-"+e+".js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(a,n);for(var o=function(e){return function(){heap.push([e].concat(Array.prototype.slice.call(arguments,0)))}},p=["addEventProperties","addUserProperties","clearEventProperties","identify","removeEventProperty","setEventProperties","track","unsetEventProperty"],c=0;c<p.length;c++)heap[p[c]]=o(p[c])};
        heap.load("176893769");
  </script-->

<!--link rel="stylesheet" type="text/css" href="assets/css/lity.min.css"-->
<!--script type="text/javascript" src="assets/js/lity.min.js"></script-->

  <!-- RTP tag -->
<script type='text/javascript'>
(function(c,h,a,f,i,e){c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
c[a].a=i;c[a].e=e;var g=h.createElement("script");g.async=true;g.type="text/javascript";
g.src=f+'?aid='+i;var b=h.getElementsByTagName("script")[0];b.parentNode.insertBefore(g,b);
})(window,document,"rtp","https://sjrtp3-cdn.marketo.com/rtp-api/v1/rtp.js","kaltura");
rtp('send','view');
rtp('get', 'campaign',true);
</script>
<!-- End of RTP tag -->




    <div class="page-content">
      <div class="wrapper">
          <!--link rel="stylesheet" href="/site.css"-->
<article>


<div class="w-section side-nav-section">
    <div class="w-container">
      <!--a href="#" data-ix="show-temp-page-nav-column" class="w-button w-clearfix mobilebtn">Topics<span class="fa fa-chevron-down" style="null"></span></a-->
      <div class="w-row body-columns">
        <div class="docs-contents">
          <div class="post-header">

            <!-- INSERT JEKYLL CONTENT HERE -->

          	<header class="post-header">
    			<h1 class="post-title">Ads</h1>
  			</header>

			
			
			<div class="lastcommittable">
				<span>Updated: Wed Feb 15 12:07:48 2017</span>, By <span class="commit-author">Oren Me</span> <a class="editgithub" href="https://github.com/kaltura/developer-platform-docs/tree/master/documentation/Mobile-Video-Player-SDKs/v3_Android_Ads.md" target="_blank">Contribute to this page</a>
				<!--tr><td>Created on: Sun Jan 29 17:25:28 2017, By: Eliza Sapir</td></tr-->
				<!--tr><td>Last commit: Wed Feb 15 12:07:48 2017, By <span class="commit-author">Oren Me</span></td></tr-->
			
				<!-- 
				
				<tr>
					<td>AnnaAleksandrowicz (1 commits) (<a href="mailto:Anna.Aleksandrowicz@kaltura.com">Anna.Aleksandrowicz@kaltura.com</a>)</td>
				</tr> -->

				<!-- 
				
				<tr>
					<td>Eliza Sapir (2 commits) (<a href="mailto:eliza.sapir@kaltura.com">eliza.sapir@kaltura.com</a>)</td>
				</tr> -->

				<!-- 
				
				<tr>
					<td>Gilad Nadav (1 commits) (<a href="mailto:Gilad.Nadav@kaltura.com">Gilad.Nadav@kaltura.com</a>)</td>
				</tr> -->

				<!-- 
				
				<tr>
					<td>Jess Portnoy (2 commits) (<a href="mailto:jess.portnoy@kaltura.com">jess.portnoy@kaltura.com</a>)</td>
				</tr> -->

				<!-- 
				
				<tr>
					<td>Oren Me (1 commits) (<a href="mailto:oren.me@gmail.com">oren.me@gmail.com</a>)</td>
				</tr> -->

				<!--  -->

			</div>

			

		</div>

            <div class="post-content">
    		
    		<p>This article describes the steps required for adding support for the IMA Plugin functionality on Android devices. IMA (or Interactive Media Ads) was developed by Google to enable you to display ads in your application’s video, audio, and game content.</p>

<h3 id="register-the-ima-plugin">Register the IMA Plugin</h3>

<p>Register the IMA Plugin as inside your application as follows:</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">PlayKitManager</span><span class="o">.</span><span class="na">registerPlugins</span><span class="o">(</span><span class="n">IMAPlugin</span><span class="o">.</span><span class="na">factory</span><span class="o">);</span>
</code></pre>
</div>

<h3 id="configure-the-plugin-configuration-object">Configure the Plugin Configuration Object</h3>

<p>To configure the plugin, add the following configuration to your <code class="highlighter-rouge">pluginConfig</code> file as follows:</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="kd">private</span> <span class="kt">void</span> <span class="nf">configureIMAPlugin</span><span class="o">(</span><span class="n">PlayerConfig</span> <span class="n">pluginConfig</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">String</span> <span class="n">adTagUrl</span> <span class="o">=</span> <span class="n">VIOAdUtil</span><span class="o">.</span><span class="na">getCastAdTag</span><span class="o">(</span><span class="n">mVideoDetailsModel</span><span class="o">);</span>
    <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">videoMimeTypes</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;();</span>
    <span class="n">IMAConfig</span> <span class="n">adsConfig</span> <span class="o">=</span> <span class="k">new</span> <span class="n">IMAConfig</span><span class="o">(</span><span class="s">"en"</span><span class="o">,</span> <span class="kc">false</span><span class="o">,</span> <span class="kc">true</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="n">videoMimeTypes</span><span class="o">,</span> <span class="n">adTagUrl</span><span class="o">,</span> <span class="kc">true</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>
</code></pre>
</div>
<h3 id="imconfig-constructor">IMConfig Constructor</h3>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">IMAConfig</span><span class="o">(</span><span class="n">String</span> <span class="n">language</span><span class="o">,</span> <span class="kt">boolean</span> <span class="n">enableBackgroundPlayback</span><span class="o">,</span> <span class="kt">boolean</span> <span class="n">autoPlayAdBreaks</span><span class="o">,</span> <span class="kt">int</span> <span class="n">videoBitrate</span><span class="o">,</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">videoMimeTypes</span><span class="o">,</span> <span class="n">String</span> <span class="n">adTagUrl</span><span class="o">,</span> <span class="kt">boolean</span> <span class="n">adAttribution</span><span class="o">,</span> <span class="kt">boolean</span> <span class="n">adCountDown</span><span class="o">)</span>
</code></pre>
</div>

<h2 id="set-the-plugin-configuration-to-the-ima-plugin">Set the Plugin Configuration to the IMA Plugin</h2>

<p>For the IMA Plugin to start loading, you’ll need to set the plugin configuration you created as follows:</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">PlayerConfig</span> <span class="n">config</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PlayerConfig</span><span class="o">();</span>
<span class="n">PlayerConfig</span><span class="o">.</span><span class="na">Plugins</span> <span class="n">plugins</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="na">plugins</span><span class="o">;</span>
<span class="n">pluginConfig</span><span class="o">.</span><span class="na">plugins</span><span class="o">.</span><span class="na">setPluginConfig</span><span class="o">(</span><span class="n">IMAPlugin</span><span class="o">.</span><span class="na">factory</span><span class="o">.</span><span class="na">getName</span><span class="o">(),</span> <span class="n">adsConfig</span><span class="o">.</span><span class="na">toJSONObject</span><span class="o">());</span>
</code></pre>
</div>

<h2 id="register-to-the-ad-started-event">Register to the Ad Started Event</h2>

<p>The Ad Started event includes the <code class="highlighter-rouge">AdInfo</code> playload. You can fetch this data in the following way:</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">player</span><span class="o">.</span><span class="na">addEventListener</span><span class="o">(</span><span class="k">new</span> <span class="n">PKEvent</span><span class="o">.</span><span class="na">Listener</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onEvent</span><span class="o">(</span><span class="n">PKEvent</span> <span class="n">event</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">log</span><span class="o">.</span><span class="na">d</span><span class="o">(</span><span class="s">"AD_STARTED"</span><span class="o">);</span>
                <span class="n">mAdStartedEventInfo</span> <span class="o">=</span> <span class="o">(</span><span class="n">AdEvent</span><span class="o">.</span><span class="na">AdStartedEvent</span><span class="o">)</span> <span class="n">event</span><span class="o">;</span>
                <span class="n">appProgressBar</span><span class="o">.</span><span class="na">setVisibility</span><span class="o">(</span><span class="n">View</span><span class="o">.</span><span class="na">INVISIBLE</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">},</span> <span class="n">AdEvent</span><span class="o">.</span><span class="na">Type</span><span class="o">.</span><span class="na">STARTED</span><span class="o">);</span>

</code></pre>
</div>

<h3 id="adinfo-api">AdInfo API</h3>

<div class="language-java highlighter-rouge"><pre class="highlight"><code>    <span class="n">String</span>   <span class="nf">getAdDescription</span><span class="o">();</span>
    <span class="n">String</span>   <span class="nf">getAdId</span><span class="o">();</span>
    <span class="n">String</span>   <span class="nf">getAdSystem</span><span class="o">();</span>
    <span class="kt">boolean</span>  <span class="nf">isAdSkippable</span><span class="o">();</span>
    <span class="n">String</span>   <span class="nf">getAdTitle</span><span class="o">();</span>
    <span class="n">String</span>   <span class="nf">getAdContentType</span><span class="o">();</span>
    <span class="kt">int</span>      <span class="nf">getAdWidth</span><span class="o">();</span>
    <span class="kt">int</span>      <span class="nf">getAdHeight</span><span class="o">();</span>
    <span class="kt">int</span>      <span class="nf">getAdPodCount</span><span class="o">();</span>
    <span class="kt">int</span>      <span class="nf">getAdPodPosition</span><span class="o">();</span>
    <span class="kt">long</span>     <span class="nf">getAdPodTimeOffset</span><span class="o">();</span>
    <span class="kt">long</span>     <span class="nf">getAdDuration</span><span class="o">();</span>
</code></pre>
</div>

<h2 id="ad-eventserror-registration-example">Ad Events/Error Registration Example</h2>

<div class="language-java highlighter-rouge"><pre class="highlight"><code>        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onEvent</span><span class="o">(</span><span class="n">PKEvent</span> <span class="n">event</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">log</span><span class="o">.</span><span class="na">d</span><span class="o">(</span><span class="s">"AD_CONTENT_PAUSE_REQUESTED"</span><span class="o">);</span>
                <span class="n">PKAdInfo</span> <span class="n">adInfo</span> <span class="o">=</span> <span class="n">player</span><span class="o">.</span><span class="na">getAdInfo</span><span class="o">();</span>
                <span class="n">appProgressBar</span><span class="o">.</span><span class="na">setVisibility</span><span class="o">(</span><span class="n">View</span><span class="o">.</span><span class="na">VISIBLE</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">},</span> <span class="n">AdEvent</span><span class="o">.</span><span class="na">Type</span><span class="o">.</span><span class="na">CONTENT_PAUSE_REQUESTED</span><span class="o">);</span>
        
        <span class="n">player</span><span class="o">.</span><span class="na">addEventListener</span><span class="o">(</span><span class="k">new</span> <span class="n">PKEvent</span><span class="o">.</span><span class="na">Listener</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onEvent</span><span class="o">(</span><span class="n">PKEvent</span> <span class="n">event</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">log</span><span class="o">.</span><span class="na">d</span><span class="o">(</span><span class="s">"Ad Event AD_RESUMED"</span><span class="o">);</span>
                <span class="n">nowPlaying</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
                <span class="n">appProgressBar</span><span class="o">.</span><span class="na">setVisibility</span><span class="o">(</span><span class="n">View</span><span class="o">.</span><span class="na">INVISIBLE</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">},</span> <span class="n">AdEvent</span><span class="o">.</span><span class="na">Type</span><span class="o">.</span><span class="na">RESUMED</span><span class="o">);</span>
        <span class="n">player</span><span class="o">.</span><span class="na">addEventListener</span><span class="o">(</span><span class="k">new</span> <span class="n">PKEvent</span><span class="o">.</span><span class="na">Listener</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onEvent</span><span class="o">(</span><span class="n">PKEvent</span> <span class="n">event</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">log</span><span class="o">.</span><span class="na">d</span><span class="o">(</span><span class="s">"Ad Event AD_ALL_ADS_COMPLETED"</span><span class="o">);</span>
                <span class="n">appProgressBar</span><span class="o">.</span><span class="na">setVisibility</span><span class="o">(</span><span class="n">View</span><span class="o">.</span><span class="na">INVISIBLE</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">},</span> <span class="n">AdEvent</span><span class="o">.</span><span class="na">Type</span><span class="o">.</span><span class="na">ALL_ADS_COMPLETED</span><span class="o">);</span>
        <span class="n">player</span><span class="o">.</span><span class="na">addEventListener</span><span class="o">(</span><span class="k">new</span> <span class="n">PKEvent</span><span class="o">.</span><span class="na">Listener</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onEvent</span><span class="o">(</span><span class="n">PKEvent</span> <span class="n">event</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">log</span><span class="o">.</span><span class="na">d</span><span class="o">(</span><span class="s">"Ad Error Event VAST_LOAD_TIMEOUT"</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">},</span> <span class="n">AdError</span><span class="o">.</span><span class="na">Type</span><span class="o">.</span><span class="na">VAST_LOAD_TIMEOUT</span><span class="o">);</span>
</code></pre>
</div>
<h2 id="ad-events">Ad Events</h2>

<p>The IMA Plugin supports the following ad events:</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code>        <span class="n">STARTED</span><span class="o">,</span>
        <span class="n">PAUSED</span><span class="o">,</span>
        <span class="n">RESUMED</span><span class="o">,</span>
        <span class="n">COMPLETED</span><span class="o">,</span>
        <span class="n">FIRST_QUARTILE</span><span class="o">,</span>
        <span class="n">MIDPOINT</span><span class="o">,</span>
        <span class="n">THIRD_QUARTILE</span><span class="o">,</span>
        <span class="n">SKIPPED</span><span class="o">(),</span>
        <span class="n">CLICKED</span><span class="o">,</span>
        <span class="n">TAPPED</span><span class="o">,</span>
        <span class="n">ICON_TAPPED</span><span class="o">,</span>
        <span class="n">AD_BREAK_READY</span><span class="o">,</span>
        <span class="n">AD_PROGRESS</span><span class="o">,</span>
        <span class="n">AD_BREAK_STARTED</span><span class="o">,</span>
        <span class="n">AD_BREAK_ENDED</span><span class="o">,</span>
        <span class="n">CUEPOINTS_CHANGED</span><span class="o">,</span>
        <span class="n">LOADED</span><span class="o">,</span>
        <span class="n">CONTENT_PAUSE_REQUESTED</span><span class="o">,</span>
        <span class="n">CONTENT_RESUME_REQUESTED</span><span class="o">,</span>
        <span class="n">ALL_ADS_COMPLETED</span>
</code></pre>
</div>

<h2 id="ad-error-events">Ad Error Events</h2>

<p>The IMA Plugin supports the following ad error events:</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code>        <span class="n">INTERNAL_ERROR</span><span class="o">(</span><span class="mi">2000</span><span class="o">),</span>
        <span class="n">VAST_MALFORMED_RESPONSE</span><span class="o">(</span><span class="mi">2001</span><span class="o">),</span>
        <span class="n">UNKNOWN_AD_RESPONSE</span><span class="o">(</span><span class="mi">2002</span><span class="o">),</span>
        <span class="n">VAST_LOAD_TIMEOUT</span><span class="o">(</span><span class="mi">2003</span><span class="o">),</span>
        <span class="n">VAST_TOO_MANY_REDIRECTS</span><span class="o">(</span><span class="mi">2004</span><span class="o">),</span>
        <span class="n">VIDEO_PLAY_ERROR</span><span class="o">(</span><span class="mi">2005</span><span class="o">),</span>
        <span class="n">VAST_MEDIA_LOAD_TIMEOUT</span><span class="o">(</span><span class="mi">2006</span><span class="o">),</span>
        <span class="n">VAST_LINEAR_ASSET_MISMATCH</span><span class="o">(</span><span class="mi">2007</span><span class="o">),</span>
        <span class="n">OVERLAY_AD_PLAYING_FAILED</span><span class="o">(</span><span class="mi">2008</span><span class="o">),</span>
        <span class="n">OVERLAY_AD_LOADING_FAILED</span><span class="o">(</span><span class="mi">2009</span><span class="o">),</span>
        <span class="n">VAST_NONLINEAR_ASSET_MISMATCH</span><span class="o">(</span><span class="mi">2010</span><span class="o">),</span>
        <span class="n">COMPANION_AD_LOADING_FAILED</span><span class="o">(</span><span class="mi">2011</span><span class="o">),</span>
        <span class="n">UNKNOWN_ERROR</span><span class="o">(</span><span class="mi">2012</span><span class="o">),</span>
        <span class="n">VAST_EMPTY_RESPONSE</span><span class="o">(</span><span class="mi">2013</span><span class="o">),</span>
        <span class="n">FAILED_TO_REQUEST_ADS</span><span class="o">(</span><span class="mi">2014</span><span class="o">),</span>
        <span class="n">VAST_ASSET_NOT_FOUND</span><span class="o">(</span><span class="mi">2015</span><span class="o">),</span>
        <span class="n">ADS_REQUEST_NETWORK_ERROR</span><span class="o">(</span><span class="mi">2016</span><span class="o">),</span>
        <span class="n">INVALID_ARGUMENTS</span><span class="o">(</span><span class="mi">2017</span><span class="o">),</span>
        <span class="n">PLAYLIST_NO_CONTENT_TRACKING</span><span class="o">(</span><span class="mi">2018</span><span class="o">);</span>
</code></pre>
</div>

<h2 id="have-questions-or-need-help">Have Questions or Need Help?</h2>

<p>Check out the <a href="https://forum.kaltura.org/c/playkit">Kaltura Player SDK Forum</a> page for different ways of getting in touch.</p>

		
</article>


      </div>
    </div>

<!-- customer.io -->
<!--script type="text/javascript">
    var _cio = _cio || [];
    (function() {
      var a,b,c;a=function(f){return function(){_cio.push([f].
      concat(Array.prototype.slice.call(arguments,0)))}};b=["load","identify",
      "sidentify","track","page"];for(c=0;c<b.length;c++){_cio[b[c]]=a(b[c])};
      var t = document.createElement('script'),
          s = document.getElementsByTagName('script')[0];
      t.async = true;
      t.id    = 'cio-tracker';
      t.setAttribute('data-site-id', 'd52b0167909beb4a2cf0');
      t.src = 'https://assets.customer.io/assets/track.js';
      s.parentNode.insertBefore(t, s);
    })();
  </script-->
  <!-- marketo -->
  <script type="text/javascript">
(function() {
  var didInit = false;
  function initMunchkin() {
    if(didInit === false) {
      didInit = true;
      Munchkin.init('984-SDM-859');
    }
  }
  var s = document.createElement('script');
  s.type = 'text/javascript';
  s.async = true;
  s.src = 'https://munchkin.marketo.net/munchkin.js';
  s.onreadystatechange = function() {
    if (this.readyState == 'complete' || this.readyState == 'loaded') {
      initMunchkin();
    }
  };
  s.onload = initMunchkin;
  document.getElementsByTagName('head')[0].appendChild(s);
})();
</script>

<!--script type="text/javascript" src="https://s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5745bb1095edd5f5"></script-->
