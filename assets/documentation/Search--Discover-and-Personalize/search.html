  <title>Searching with Kaltura's eSearch API</title>

  <meta name="description" content="VPaaS allows you to build cloud video services, supplies SDKs, and works on all devices, media workflows, and applications. Pay as you go. 
">
    <meta property="st:title" content="Searching with Kaltura's eSearch API" >
    <meta property="st:published_at" content="">

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
<script>
window.jQuery = window.jquery;
</script>
  <script type="text/javascript">
    try{Typekit.load();}catch(e){}
  </script>
  <link rel="apple-touch-icon" href="https://daks2k3a4ib2z.cloudfront.net/img/webclip.png">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
  <script type="text/javascript">
    var switchTo5x=true;
  </script>
  <script type="text/javascript">var switchTo5x=true;</script>

  
<script type="text/javascript">
    	
	//back to top
	if ($('#back-to-top').length) {
    		var scrollTrigger = 100, // px
	        backToTop = function () {
	            var scrollTop = $(window).scrollTop();
	            if (scrollTop > scrollTrigger) {
	                $('#back-to-top').addClass('show');
	            } else {
	                $('#back-to-top').removeClass('show');
	            }
	        };
	    backToTop();
	    $(window).on('scroll', function () {
	        backToTop();
	    });
	    $('#back-to-top a:first-child').on('click', function (e) {
	        e.preventDefault();
	        $('html,body').animate({
	            scrollTop: 0
	        }, 700);
	    });
	}

</script>

<script src='https://www.google.com/recaptcha/api.js'></script>
<script>
function verify_recapcha()
{
	var isCaptchaValidated = false;
	var response = grecaptcha.getResponse();
	if(response.length == 0) {
	    isCaptchaValidated = false;
	    alert('Please confirm that you are a Human.');
	    return false;
	} else {
	    return true;
	}

}
</script>
<!--script type="text/javascript" src="assets/js/webflow.js"></script>
<script type="text/javascript" src="assets/js/opentip-jquery.js"></script-->
    <!--script type="text/javascript">
      window.heap=window.heap||[],heap.load=function(e,t){window.heap.appid=e,window.heap.config=t=t||{};var r=t.forceSSL||"https:"===document.location.protocol,a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src="https://cdn.heapanalytics.com/js/heap-"+e+".js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(a,n);for(var o=function(e){return function(){heap.push([e].concat(Array.prototype.slice.call(arguments,0)))}},p=["addEventProperties","addUserProperties","clearEventProperties","identify","removeEventProperty","setEventProperties","track","unsetEventProperty"],c=0;c<p.length;c++)heap[p[c]]=o(p[c])};
        heap.load("176893769");
  </script-->

<!--link rel="stylesheet" type="text/css" href="assets/css/lity.min.css"-->
<!--script type="text/javascript" src="assets/js/lity.min.js"></script-->

  <!-- RTP tag -->
<script type='text/javascript'>
(function(c,h,a,f,i,e){c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
c[a].a=i;c[a].e=e;var g=h.createElement("script");g.async=true;g.type="text/javascript";
g.src=f+'?aid='+i;var b=h.getElementsByTagName("script")[0];b.parentNode.insertBefore(g,b);
})(window,document,"rtp","https://sjrtp3-cdn.marketo.com/rtp-api/v1/rtp.js","kaltura");
rtp('send','view');
rtp('get', 'campaign',true);
</script>
<!-- End of RTP tag -->




    <div class="page-content">
      <div class="wrapper">
          <!--link rel="stylesheet" href="/site.css"-->
<article>


<div class="w-section side-nav-section">
    <div class="w-container">
      <!--a href="#" data-ix="show-temp-page-nav-column" class="w-button w-clearfix mobilebtn">Topics<span class="fa fa-chevron-down" style="null"></span></a-->
      <div class="w-row body-columns">
        <div class="docs-contents">
          <div class="post-header">

            <!-- INSERT JEKYLL CONTENT HERE -->

          	<header class="post-header">
    			<h1 class="post-title">Searching with Kaltura's eSearch API</h1>
  			</header>

			
			
			<div class="lastcommittable">
				<span>Updated: Tue Apr 2 09:27:24 2019</span>, By <span class="commit-author">tzubeli</span> <a class="editgithub" href="https://github.com/kaltura/developer-platform-docs/tree/master/documentation/Search--Discover-and-Personalize/search.md" target="_blank">Contribute to this page</a>
				<!--tr><td>Created on: Tue Apr 2 09:12:56 2019, By: tzubeli</td></tr-->
				<!--tr><td>Last commit: Tue Apr 2 09:27:24 2019, By <span class="commit-author">tzubeli</span></td></tr-->
			
				<!-- 
				
				<tr>
					<td>tzubeli (2 commits) (<a href="mailto:avital.tzubeli@kaltura.com">avital.tzubeli@kaltura.com</a>)</td>
				</tr> -->

				<!--  -->

			</div>

			

		</div>

            <div class="post-content">
    		
    		<p>If you’ve had experience building search capabilities into your video applications, you know that indexing and searching video content is complex - not only due to the time dimension, but because it also requires searching through many objects and related metadata. You’ve had to write multiple queries that are time consuming, fragile at scale and hard to optimize for performance.</p>

<p>We’re excited to introduce a new Kaltura search API that will revolutionize how video search is done. Leveraging the Elastic Search engine, eSearch exposes a set of API actions that unlock a variety of search capabilities and simplify how video search is done.</p>

<p>You can try it out yourself in the <a href="https://developer.kaltura.com/console/service/eSearch/action/searchEntry">console</a>, and we’ll demonstrate a few of the cool features below:</p>

<h2 id="search-term-highlighting">Search Term Highlighting</h2>

<p>A really neat feature, highlighting, gives you insight on why a particular object was returned in the search results, meaning, what caused the object to match the query.<br />
Let’s assume you have an account in Kaltura with over a thousand entries and you’re looking for a pasta recipe. Searching “pasta” with the unified search would search through all entry data - and this is where highlighting comes in: you’d be able to determine whether pasta was found in the captions, description, or simply just the entry name.</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="nv">$unifiedItem</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">KalturaESearchUnifiedItem</span> <span class="p">();</span>
<span class="nv">$unifiedItem</span><span class="o">-&gt;</span><span class="na">searchTerm</span> <span class="o">=</span> <span class="s1">'pasta'</span><span class="p">;</span>
<span class="nv">$unifiedItem</span><span class="o">-&gt;</span><span class="na">itemType</span> <span class="o">=</span> <span class="nx">KalturaESearchItemType</span><span class="o">::</span><span class="na">EXACT_MATCH</span><span class="p">;</span>
<span class="nv">$unifiedItem</span><span class="o">-&gt;</span><span class="na">addHighlight</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

<span class="nv">$searchOperator</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">KalturaESearchEntryOperator</span><span class="p">();</span>
<span class="nv">$searchOperator</span><span class="o">-&gt;</span><span class="na">searchItems</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="nv">$unifiedItem</span><span class="p">);</span>

<span class="nv">$searchParams</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">KalturaESearchEntryParams</span><span class="p">();</span>
<span class="nv">$searchParams</span><span class="o">-&gt;</span><span class="na">searchOperator</span> <span class="o">=</span> <span class="nv">$searchOperator</span><span class="p">;</span>
<span class="nv">$elasticsearchPlugin</span> <span class="o">=</span> <span class="nx">KalturaElasticSearchClientPlugin</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="nv">$client</span><span class="p">);</span>
<span class="nv">$searchResults</span> <span class="o">=</span> <span class="nv">$elasticsearchPlugin</span><span class="o">-&gt;</span><span class="na">eSearch</span><span class="o">-&gt;</span><span class="na">searchEntry</span><span class="p">(</span><span class="nv">$searchParams</span><span class="p">,</span> <span class="kc">null</span><span class="p">);</span></code></pre></figure>

<h3 id="results">Results</h3>

<figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
</span><span class="nt">"totalCount"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
</span><span class="nt">"objects"</span><span class="p">:[</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="nt">"object"</span><span class="p">:{</span><span class="w">
</span><span class="err">...</span><span class="w">
</span><span class="nt">"id"</span><span class="p">:</span><span class="s2">"12345"</span><span class="p">,</span><span class="w">
</span><span class="nt">"name"</span><span class="p">:</span><span class="s2">"delicious pasta recipe"</span><span class="p">,</span><span class="w">
</span><span class="nt">"description"</span><span class="p">:</span><span class="s2">"delicious pasta recipe"</span><span class="p">,</span><span class="w">
</span><span class="err">...</span><span class="w">
</span><span class="err">...</span><span class="w">
</span><span class="nt">"highlight"</span><span class="p">:[</span><span class="w">
</span><span class="p">{</span><span class="w"> </span><span class="nt">"fieldName"</span><span class="p">:</span><span class="s2">"description"</span><span class="p">,</span><span class="w">
</span><span class="nt">"hits"</span><span class="p">:[</span><span class="w">
</span><span class="p">{</span><span class="w"> </span><span class="nt">"value"</span><span class="p">:</span><span class="s2">"delicious &lt;em&gt;pasta&lt;\/em&gt; recipe"</span><span class="p">,</span><span class="w">
</span><span class="nt">"objectType"</span><span class="p">:</span><span class="s2">"KalturaString"</span><span class="w"> </span><span class="p">}],</span><span class="w">
</span><span class="nt">"objectType"</span><span class="p">:</span><span class="s2">"KalturaESearchHighlight"</span><span class="w"> </span><span class="p">},</span><span class="w">
</span><span class="p">{</span><span class="w"> </span><span class="nt">"fieldName"</span><span class="p">:</span><span class="s2">"name"</span><span class="p">,</span><span class="w">
</span><span class="nt">"hits"</span><span class="p">:[</span><span class="w">
</span><span class="p">{</span><span class="w"> </span><span class="nt">"value"</span><span class="p">:</span><span class="s2">"delicious &lt;em&gt;pasta&lt;\/em&gt; recipe"</span><span class="p">,</span><span class="w">
</span><span class="nt">"objectType"</span><span class="p">:</span><span class="s2">"KalturaString"</span><span class="w"> </span><span class="p">}],</span><span class="w">
</span><span class="nt">"objectType"</span><span class="p">:</span><span class="s2">"KalturaESearchHighlight"</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span><span class="err">}</span></code></pre></figure>

<h2 id="partial-search">Partial Search</h2>
<p>Sometimes you can’t be sure about the exact phrase to search. Perhaps you’re not sure if the entry is listed under “cake” or “cupcake.”<br />
Enter partial search. It is exactly what it sounds like.</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="nv">$entryNameItem</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">KalturaESearchEntryItem</span><span class="p">();</span>
<span class="nv">$entryNameItem</span><span class="o">-&gt;</span><span class="na">searchTerm</span> <span class="o">=</span> <span class="s1">'cake'</span><span class="p">;</span>
<span class="nv">$entryNameItem</span><span class="o">-&gt;</span><span class="na">itemType</span> <span class="o">=</span> <span class="nx">KalturaESearchItemType</span><span class="o">::</span><span class="na">PARTIAL</span><span class="p">;</span>
<span class="nv">$entryNameItem</span><span class="o">-&gt;</span><span class="na">fieldName</span> <span class="o">=</span> <span class="nx">KalturaESearchEntryFieldName</span><span class="o">::</span><span class="na">NAME</span><span class="p">;</span>

<span class="nv">$entryNameItem</span><span class="o">-&gt;</span><span class="na">addHighlight</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

<span class="nv">$searchOperator</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">KalturaESearchEntryOperator</span><span class="p">();</span>
<span class="nv">$searchOperator</span><span class="o">-&gt;</span><span class="na">searchItems</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="nv">$entryNameItem</span><span class="p">);</span>

<span class="nv">$searchParams</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">KalturaESearchEntryParams</span><span class="p">();</span>
<span class="nv">$searchParams</span><span class="o">-&gt;</span><span class="na">searchOperator</span> <span class="o">=</span> <span class="nv">$searchOperator</span><span class="p">;</span>
<span class="nv">$elasticsearchPlugin</span> <span class="o">=</span> <span class="nx">KalturaElasticSearchClientPlugin</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="nv">$client</span><span class="p">);</span>
<span class="nv">$searchResults</span> <span class="o">=</span> <span class="nv">$elasticsearchPlugin</span><span class="o">-&gt;</span><span class="na">eSearch</span><span class="o">-&gt;</span><span class="na">searchEntry</span><span class="p">(</span><span class="nv">$searchParams</span><span class="p">,</span> <span class="kc">null</span><span class="p">);</span></code></pre></figure>

<h3 id="results-1">Results</h3>

<figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
</span><span class="nt">"hits"</span><span class="p">:[</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="err">cup&lt;em&gt;cake&lt;/em&gt;</span><span class="s2">",
"</span><span class="err">objectType</span><span class="s2">":"</span><span class="err">KalturaString"</span><span class="w">
</span><span class="p">}]</span><span class="w">
</span><span class="p">}</span></code></pre></figure>

<h2 id="synonyms">Synonyms</h2>

<p>At this point you’re just hungry and you don’t care whether the recipe is for pasta or salmon. You’d like to eat something “delicious”, but you’re open to “yummy” as well. This is another case for the partial feature, which uses the WordNet English synonym dictionary by default and gets you that recipe with fewer searches!</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"> 
<span class="cp">&lt;?php</span>
<span class="nv">$entryNameItem</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">KalturaESearchEntryItem</span><span class="p">();</span> <span class="nv">$entryNameItem</span><span class="o">-&gt;</span><span class="na">searchTerm</span> <span class="o">=</span> <span class="s1">'delicious'</span><span class="p">;</span> 
<span class="nv">$entryNameItem</span><span class="o">-&gt;</span><span class="na">itemType</span> <span class="o">=</span> <span class="nx">KalturaESearchItemType</span><span class="o">::</span><span class="na">PARTIAL</span><span class="p">;</span> 
<span class="nv">$entryNameItem</span><span class="o">-&gt;</span><span class="na">fieldName</span> <span class="o">=</span> <span class="nx">KalturaESearchEntryFieldName</span><span class="o">::</span><span class="na">NAME</span><span class="p">;</span> <span class="nv">$entryNameItem</span><span class="o">-&gt;</span><span class="na">addHighlight</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span> 
<span class="nv">$searchOperator</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">KalturaESearchEntryOperator</span><span class="p">();</span> 

<span class="nv">$searchOperator</span><span class="o">-&gt;</span><span class="na">searchItems</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="nv">$entryNameItem</span><span class="p">);</span>
<span class="nv">$searchParams</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">KalturaESearchEntryParams</span><span class="p">();</span>

<span class="nv">$searchParams</span><span class="o">-&gt;</span><span class="na">searchOperator</span> <span class="o">=</span> <span class="nv">$searchOperator</span><span class="p">;</span> 
<span class="nv">$elasticsearchPlugin</span> <span class="o">=</span> <span class="nx">KalturaElasticSearchClientPlugin</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="nv">$client</span><span class="p">);</span> 
<span class="nv">$searchResults</span> <span class="o">=</span> <span class="nv">$elasticsearchPlugin</span><span class="o">-&gt;</span><span class="na">eSearch</span><span class="o">-&gt;</span><span class="na">searchEntry</span><span class="p">(</span><span class="nv">$searchParams</span><span class="p">,</span> <span class="kc">null</span><span class="p">);</span></code></pre></figure>

<h3 id="results-2">Results</h3>

<figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
</span><span class="nt">"hits"</span><span class="p">:[</span><span class="w"> </span><span class="p">{</span><span class="w">  </span><span class="nt">"value"</span><span class="p">:</span><span class="s2">"&lt;em&gt;yummy&lt;\/em&gt; recipe"</span><span class="p">,</span><span class="w"> </span><span class="err">}</span><span class="w"> </span><span class="p">],</span><span class="w">
    </span><span class="nt">"objectType"</span><span class="p">:</span><span class="s2">"KalturaESearchHighlight"</span><span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="err">],</span><span class="w">    
</span><span class="err">}</span></code></pre></figure>

<h2 id="multi-language">Multi-Language</h2>

<p>Now imagine that you have recipes with captions in various languages, such as Chinese or German. eSearch supports searching across 22 languages (and we’ll be adding more!), including; Spanish, French, Russian, Dutch, Chinese. Let’s demonstrate searching inside captions for the Chinese phrase 食谱 which, you guessed it, means recipe.</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="nv">$captionItem</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">KalturaESearchCaptionItem</span><span class="p">();</span>
<span class="nv">$captionItem</span><span class="o">-&gt;</span><span class="na">searchTerm</span> <span class="o">=</span> <span class="s1">'食谱'</span><span class="p">;</span>
<span class="nv">$captionItem</span><span class="o">-&gt;</span><span class="na">itemType</span> <span class="o">=</span> <span class="nx">KalturaESearchItemType</span><span class="o">::</span><span class="na">PARTIAL</span><span class="p">;</span>
<span class="nv">$captionItem</span><span class="o">-&gt;</span><span class="na">fieldName</span> <span class="o">=</span> <span class="nx">KalturaESearchCaptionFieldName</span><span class="o">::</span><span class="na">CONTENT</span><span class="p">;</span>
<span class="nv">$captionItem</span><span class="o">-&gt;</span><span class="na">addHighlight</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

<span class="nv">$searchOperator</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">KalturaESearchEntryOperator</span><span class="p">();</span>
<span class="nv">$searchOperator</span><span class="o">-&gt;</span><span class="na">searchItems</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="nv">$captionItem</span><span class="p">);</span>

<span class="nv">$searchParams</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">KalturaESearchEntryParams</span><span class="p">();</span>
<span class="nv">$searchParams</span><span class="o">-&gt;</span><span class="na">searchOperator</span> <span class="o">=</span> <span class="nv">$searchOperator</span><span class="p">;</span>
<span class="nv">$elasticsearchPlugin</span> <span class="o">=</span> <span class="nx">KalturaElasticSearchClientPlugin</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="nv">$client</span><span class="p">);</span>
<span class="nv">$searchResults</span> <span class="o">=</span> <span class="nv">$elasticsearchPlugin</span><span class="o">-&gt;</span><span class="na">eSearch</span><span class="o">-&gt;</span><span class="na">searchEntry</span><span class="p">(</span><span class="nv">$searchParams</span><span class="p">,</span> <span class="kc">null</span><span class="p">);</span></code></pre></figure>

<h3 id="results-3">Results</h3>

<figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
</span><span class="nt">"name"</span><span class="p">:</span><span class="s2">"Amazing recipes"</span><span class="p">,</span><span class="w">
</span><span class="nt">"items"</span><span class="p">:[</span><span class="w">
</span><span class="p">{</span><span class="w"> </span><span class="nt">"line"</span><span class="p">:</span><span class="s2">"\u98df\u8c31"</span><span class="p">,</span><span class="w">
</span><span class="nt">"startsAt"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
</span><span class="nt">"endsAt"</span><span class="p">:</span><span class="mi">10000</span><span class="p">,</span><span class="w">
</span><span class="nt">"language"</span><span class="p">:</span><span class="s2">"Chinese"</span><span class="p">,</span><span class="w">
</span><span class="nt">"captionAssetId"</span><span class="p">:</span><span class="s2">"0_5ifj0qhq"</span><span class="p">,</span><span class="w">
</span><span class="nt">"highlight"</span><span class="p">:[</span><span class="w">
</span><span class="p">{</span><span class="w"> </span><span class="nt">"fieldName"</span><span class="p">:</span><span class="s2">"caption_assets.content.raw"</span><span class="p">,</span><span class="w">
</span><span class="nt">"hits"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
</span><span class="p">{</span><span class="w"> </span><span class="nt">"value"</span><span class="p">:</span><span class="s2">"&lt;em&gt;\u98df\u8c31&lt;\/em&gt;"</span><span class="p">,</span><span class="w">
</span><span class="nt">"objectType"</span><span class="p">:</span><span class="s2">"KalturaString"</span><span class="w"> </span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span><span class="err">}</span><span class="w">
</span><span class="err">}</span></code></pre></figure>

<h2 id="custom-metadata-profiles-and-fields">Custom Metadata Profiles and Fields</h2>

<p>The unified option searches through all of the entry’s related objects - such as captions, metadata, and cue-points but if you know where your keyword is, with eSearch it is just as easy to search through specific objects.</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="nv">$metadataItem</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">KalturaESearchEntryMetadataItem</span><span class="p">();</span>
<span class="nv">$metadataItem</span><span class="o">-&gt;</span><span class="na">searchTerm</span> <span class="o">=</span> <span class="s1">'recipe'</span><span class="p">;</span>
<span class="nv">$metadataItem</span><span class="o">-&gt;</span><span class="na">itemType</span> <span class="o">=</span> <span class="nx">KalturaESearchItemType</span><span class="o">::</span><span class="na">STARTS_WITH</span><span class="p">;</span>
<span class="nv">$metadataItem</span><span class="o">-&gt;</span><span class="na">metadataProfileId</span> <span class="o">=</span> <span class="mi">653</span><span class="p">;</span>
<span class="nv">$metadataItem</span><span class="o">-&gt;</span><span class="na">addHighlight</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span></code></pre></figure>

<blockquote>
  <p>By default, custom metadata search goes through all fields in the chosen profile (metadataProfileId). To define a specific field, you could set the x-path attribute like so:</p>
</blockquote>

<p>$metadataItem-&gt;xpath = “/<em>[local-name()=’metadata’]/</em>[local-name()=’Field1’]”;<br />
$searchOperator = new KalturaESearchEntryOperator();<br />
$searchOperator-&gt;searchItems = array($metadataItem);</p>

<p>$searchParams = new KalturaESearchEntryParams();<br />
$searchParams-&gt;searchOperator = $searchOperator;<br />
$elasticsearchPlugin = KalturaElasticSearchClientPlugin::get($client);<br />
$searchResults = $elasticsearchPlugin-&gt;eSearch-&gt;searchEntry($searchParams, null);</p>

<h3 id="results-4">Results</h3>

<figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
</span><span class="nt">"xpath"</span><span class="p">:</span><span class="s2">"/* local-name()='metadata' /* local-name()='Field1'"</span><span class="p">,</span><span class="w">
</span><span class="nt">"metadataProfileId"</span><span class="p">:</span><span class="mi">653</span><span class="p">,</span><span class="w">
</span><span class="nt">"metadataFieldId"</span><span class="p">:</span><span class="mi">668</span><span class="p">,</span><span class="w">
</span><span class="nt">"valueText"</span><span class="p">:</span><span class="s2">"recipe"</span><span class="p">,</span><span class="w">
</span><span class="nt">"highlight"</span><span class="p">:[</span><span class="w">
    </span><span class="p">{</span><span class="w">  </span><span class="nt">"fieldName"</span><span class="p">:</span><span class="s2">"metadata.value_text.raw"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"hits"</span><span class="p">:[</span><span class="w">
            </span><span class="p">{</span><span class="w">  </span><span class="nt">"value"</span><span class="p">:</span><span class="s2">"&lt;em&gt;recipe&lt;\/em&gt;"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"objectType"</span><span class="p">:</span><span class="s2">"KalturaString"</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">],</span><span class="w">
        </span><span class="nt">"objectType"</span><span class="p">:</span><span class="s2">"KalturaESearchHighlight"</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">]</span><span class="w">
</span><span class="p">}</span></code></pre></figure>

<p>Searching in Cue Points<br />
Video often includes temporal (time based) metadata such as annotations, comments, notes, overlays, in-video chapters and markers, synced powerpoint slides, or descriptive data (often generated by video analysis engines such as OCR, face detection, scene detection, etc.). Cue Points are the objects that store this temporal metadata, and it’s very often that you’ll want to search through them to create smart search driven experiences.</p>

<p>For example, in our video cooking recipes library, all our videos were marked with ingredients as we were using them: sugar, flour, etc. Let’s find all the strawberry recipes where we’re not using sugar.</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="nv">$cuePointItem</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">KalturaESearchCuePointItem</span><span class="p">();</span>
<span class="nv">$cuePointItem</span><span class="o">-&gt;</span><span class="na">itemType</span> <span class="o">=</span> <span class="nx">KalturaESearchItemType</span><span class="o">::</span><span class="na">EXACT_MATCH</span><span class="p">;</span>
<span class="nv">$cuePointItem</span><span class="o">-&gt;</span><span class="na">fieldName</span> <span class="o">=</span> <span class="nx">KalturaESearchCuePointFieldName</span><span class="o">::</span><span class="na">TEXT</span><span class="p">;</span>
<span class="nv">$cuePointItem</span><span class="o">-&gt;</span><span class="na">searchTerm</span> <span class="o">=</span> <span class="s1">'adding sugar'</span><span class="p">;</span>

<span class="nv">$notOperator</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">KalturaESearchEntryOperator</span><span class="p">();</span>
<span class="nv">$notOperator</span><span class="o">-&gt;</span><span class="na">operator</span> <span class="o">=</span> <span class="nx">KalturaESearchOperatorType</span><span class="o">::</span><span class="na">NOT_OP</span><span class="p">;</span>
<span class="nv">$notOperator</span><span class="o">-&gt;</span><span class="na">searchItems</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="nv">$cuePointItem</span><span class="p">);</span>
<span class="nx">We</span> <span class="nb">defined</span> <span class="nx">a</span> <span class="nx">cue</span> <span class="nx">point</span> <span class="nx">item</span> <span class="nx">with</span> <span class="err">‘</span><span class="nx">adding</span> <span class="nx">sugar</span><span class="err">’</span> <span class="k">as</span> <span class="nx">its</span> <span class="nx">search</span> <span class="nx">term</span><span class="o">.</span> <span class="nx">Then</span> <span class="nx">we</span> <span class="nx">added</span> <span class="nx">it</span> <span class="nx">to</span> <span class="nx">the</span> <span class="nx">NOT</span> <span class="nx">operator</span><span class="o">.</span>

<span class="nv">$entryNameItem</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">KalturaESearchEntryItem</span><span class="p">();</span>
<span class="nv">$entryNameItem</span><span class="o">-&gt;</span><span class="na">searchTerm</span> <span class="o">=</span> <span class="s1">'strawberry'</span><span class="p">;</span>
<span class="nv">$entryNameItem</span><span class="o">-&gt;</span><span class="na">itemType</span> <span class="o">=</span> <span class="nx">KalturaESearchItemType</span><span class="o">::</span><span class="na">PARTIAL</span><span class="p">;</span>
<span class="nv">$entryNameItem</span><span class="o">-&gt;</span><span class="na">fieldName</span> <span class="o">=</span> <span class="nx">KalturaESearchEntryFieldName</span><span class="o">::</span><span class="na">NAME</span><span class="p">;</span>

<span class="nv">$searchOperator</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">KalturaESearchEntryOperator</span><span class="p">();</span>
<span class="nv">$searchOperator</span><span class="o">-&gt;</span><span class="na">operator</span> <span class="o">=</span> <span class="nx">KalturaESearchOperatorType</span><span class="o">::</span><span class="na">AND_OP</span><span class="p">;</span>
<span class="nv">$searchOperator</span><span class="o">-&gt;</span><span class="na">searchItems</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="nv">$entryNameItem</span><span class="p">,</span> <span class="nv">$notOperator</span><span class="p">);</span>

<span class="nv">$searchParams</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">KalturaESearchEntryParams</span><span class="p">();</span>
<span class="nv">$searchParams</span><span class="o">-&gt;</span><span class="na">searchOperator</span> <span class="o">=</span> <span class="nv">$searchOperator</span><span class="p">;</span>

<span class="nv">$elasticsearchPlugin</span> <span class="o">=</span> <span class="nx">KalturaElasticSearchClientPlugin</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="nv">$client</span><span class="p">);</span>
<span class="nv">$searchResults</span> <span class="o">=</span> <span class="nv">$elasticsearchPlugin</span><span class="o">-&gt;</span><span class="na">eSearch</span><span class="o">-&gt;</span><span class="na">searchEntry</span><span class="p">(</span><span class="nv">$searchParams</span><span class="p">,</span> <span class="kc">null</span><span class="p">);</span></code></pre></figure>

<p>Then we searched for recipes containing strawberry with an AND condition on our previous NOT.</p>

<h3 id="results-5">Results</h3>

<figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
</span><span class="nt">"object"</span><span class="p">:{</span><span class="w">
</span><span class="nt">"id"</span><span class="p">:</span><span class="s2">"123456"</span><span class="p">,</span><span class="w">
</span><span class="nt">"name"</span><span class="p">:</span><span class="s2">"strawberry shortcake recipe"</span><span class="p">,</span><span class="w">
</span><span class="nt">"objectType"</span><span class="p">:</span><span class="s2">"KalturaMediaEntry"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span><span class="p">}</span></code></pre></figure>

<h2 id="ranges-and-dates">Ranges and Dates</h2>

<p>Perhaps one of the most common searches includes searching between specific date ranges. We’ll search for all recipes created this past January, using their epoch timestamps.</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="nv">$entryNameItem</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">KalturaESearchEntryItem</span><span class="p">();</span>
<span class="nv">$entryNameItem</span><span class="o">-&gt;</span><span class="na">searchTerm</span> <span class="o">=</span> <span class="s1">'recipe'</span><span class="p">;</span>
<span class="nv">$entryNameItem</span><span class="o">-&gt;</span><span class="na">itemType</span> <span class="o">=</span> <span class="nx">KalturaESearchItemType</span><span class="o">::</span><span class="na">EXACT_MATCH</span><span class="p">;</span>
<span class="nv">$entryNameItem</span><span class="o">-&gt;</span><span class="na">fieldName</span> <span class="o">=</span> <span class="nx">KalturaESearchEntryFieldName</span><span class="o">::</span><span class="na">NAME</span><span class="p">;</span>

<span class="nv">$rangeItem</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">KalturaESearchRange</span><span class="p">();</span>
<span class="nv">$rangeItem</span><span class="o">-&gt;</span><span class="na">greaterThanOrEqual</span> <span class="o">=</span> <span class="mi">1514764800</span><span class="p">;</span>
<span class="nv">$rangeItem</span><span class="o">-&gt;</span><span class="na">lessThanOrEqual</span> <span class="o">=</span> <span class="mi">1517443199</span><span class="p">;</span>

<span class="nv">$entryCreatedAtItem</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">KalturaESearchEntryItem</span><span class="p">();</span>
<span class="nv">$entryCreatedAtItem</span><span class="o">-&gt;</span><span class="na">itemType</span> <span class="o">=</span> <span class="nx">KalturaESearchItemType</span><span class="o">::</span><span class="na">RANGE</span><span class="p">;</span>
<span class="nv">$entryCreatedAtItem</span><span class="o">-&gt;</span><span class="na">fieldName</span> <span class="o">=</span> <span class="nx">KalturaESearchEntryFieldName</span><span class="o">::</span><span class="na">CREATED_AT</span><span class="p">;</span>
<span class="nv">$entryCreatedAtItem</span><span class="o">-&gt;</span><span class="na">range</span> <span class="o">=</span> <span class="nv">$rangeItem</span><span class="p">;</span>

<span class="nv">$searchOperator</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">KalturaESearchEntryOperator</span><span class="p">();</span>
<span class="nv">$searchOperator</span><span class="o">-&gt;</span><span class="na">operator</span> <span class="o">=</span> <span class="nx">KalturaESearchOperatorType</span><span class="o">::</span><span class="na">AND_OP</span><span class="p">;</span>
<span class="nv">$searchOperator</span><span class="o">-&gt;</span><span class="na">searchItems</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="nv">$entryNameItem</span><span class="p">,</span> <span class="nv">$entryCreatedAtItem</span><span class="p">);</span>

<span class="nv">$searchParams</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">KalturaESearchEntryParams</span><span class="p">();</span>
<span class="nv">$searchParams</span><span class="o">-&gt;</span><span class="na">searchOperator</span> <span class="o">=</span> <span class="nv">$searchOperator</span><span class="p">;</span>

<span class="nv">$elasticsearchPlugin</span> <span class="o">=</span> <span class="nx">KalturaElasticSearchClientPlugin</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="nv">$client</span><span class="p">);</span>
<span class="nv">$searchResults</span> <span class="o">=</span> <span class="nv">$elasticsearchPlugin</span><span class="o">-&gt;</span><span class="na">eSearch</span><span class="o">-&gt;</span><span class="na">searchEntry</span><span class="p">(</span><span class="nv">$searchParams</span><span class="p">,</span> <span class="kc">null</span><span class="p">);</span></code></pre></figure>

<h3 id="results-6">Results</h3>

<figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
</span><span class="nt">"object"</span><span class="p">:{</span><span class="w">
</span><span class="nt">"name"</span><span class="p">:</span><span class="s2">"pasta recipe"</span><span class="p">,</span><span class="w">
</span><span class="nt">"createdAt"</span><span class="p">:</span><span class="mi">1516097789</span><span class="p">,</span><span class="w">
</span><span class="nt">"objectType"</span><span class="p">:</span><span class="s2">"KalturaMediaEntry"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span><span class="p">}</span></code></pre></figure>

<h2 id="complex-search">Complex Search</h2>

<p>Now to make things interesting: what if you were looking for an entry with “pasta” in the name and 食谱 (recipe in Chinese) within the captions? Or if you were looking for “recipe” in custom metadata and wanted to highlight the results? eSearch has your back.</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="nv">$entryNameItem</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">KalturaESearchEntryItem</span><span class="p">();</span>
<span class="nv">$entryNameItem</span><span class="o">-&gt;</span><span class="na">searchTerm</span> <span class="o">=</span> <span class="s1">'pasta'</span><span class="p">;</span>
<span class="nv">$entryNameItem</span><span class="o">-&gt;</span><span class="na">itemType</span> <span class="o">=</span> <span class="nx">KalturaESearchItemType</span><span class="o">::</span><span class="na">EXACT_MATCH</span><span class="p">;</span>
<span class="nv">$entryNameItem</span><span class="o">-&gt;</span><span class="na">fieldName</span> <span class="o">=</span> <span class="nx">KalturaESearchEntryFieldName</span><span class="o">::</span><span class="na">NAME</span><span class="p">;</span>
<span class="nv">$entryNameItem</span><span class="o">-&gt;</span><span class="na">addHighlight</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span></code></pre></figure>

<p>We defined an entry item with pasta in its name.</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="nv">$captionItem</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">KalturaESearchCaptionItem</span><span class="p">();</span>
<span class="nv">$captionItem</span><span class="o">-&gt;</span><span class="na">searchTerm</span> <span class="o">=</span> <span class="s1">'食谱'</span><span class="p">;</span>
<span class="nv">$captionItem</span><span class="o">-&gt;</span><span class="na">itemType</span> <span class="o">=</span> <span class="nx">KalturaESearchItemType</span><span class="o">::</span><span class="na">PARTIAL</span><span class="p">;</span>
<span class="nv">$captionItem</span><span class="o">-&gt;</span><span class="na">fieldName</span> <span class="o">=</span> <span class="nx">KalturaESearchCaptionFieldName</span><span class="o">::</span><span class="na">CONTENT</span><span class="p">;</span>
<span class="nv">$captionItem</span><span class="o">-&gt;</span><span class="na">addHighlight</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span></code></pre></figure>

<p>Then we defined a new caption item which contains recipe (Chinese) in its captions</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="nv">$metadataItem</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">KalturaESearchEntryMetadataItem</span><span class="p">();</span>
<span class="nv">$metadataItem</span><span class="o">-&gt;</span><span class="na">searchTerm</span> <span class="o">=</span> <span class="s1">'recipe'</span><span class="p">;</span>
<span class="nv">$metadataItem</span><span class="o">-&gt;</span><span class="na">itemType</span> <span class="o">=</span> <span class="nx">KalturaESearchItemType</span><span class="o">::</span><span class="na">STARTS_WITH</span><span class="p">;</span>
<span class="nv">$metadataItem</span><span class="o">-&gt;</span><span class="na">metadataProfileId</span> <span class="o">=</span> <span class="mi">653</span><span class="p">;</span>
<span class="nv">$metadataItem</span><span class="o">-&gt;</span><span class="na">addHighlight</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span></code></pre></figure>

<p>We also created a metadata item of <strong>profile id</strong> 653 that starts with recipe. Notice that these three objects have no relation to one another.</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"> 
<span class="cp">&lt;?php</span>
<span class="nv">$captionsOrMetadataOperator</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">KalturaESearchEntryOperator</span><span class="p">();</span>
<span class="nv">$captionsOrMetadataOperator</span><span class="o">-&gt;</span><span class="na">operator</span> <span class="o">=</span> <span class="nx">KalturaESearchOperatorType</span><span class="o">::</span><span class="na">OR_OP</span><span class="p">;</span>
<span class="nv">$captionsOrMetadataOperator</span><span class="o">-&gt;</span><span class="na">searchItems</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="nv">$captionItem</span><span class="p">,</span> <span class="nv">$metadataItem</span><span class="p">);</span></code></pre></figure>

<p>Now we’ve defined an OR condition between the caption item and the metadata item.</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="nv">$searchOperator</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">KalturaESearchEntryOperator</span><span class="p">();</span>
<span class="nv">$searchOperator</span><span class="o">-&gt;</span><span class="na">operator</span> <span class="o">=</span> <span class="nx">KalturaESearchOperatorType</span><span class="o">::</span><span class="na">AND_OP</span><span class="p">;</span>
<span class="nv">$searchOperator</span><span class="o">-&gt;</span><span class="na">searchItems</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="nv">$entryNameItem</span><span class="p">,</span> <span class="nv">$captionsOrMetadataOperator</span><span class="p">);</span>
<span class="nx">And</span> <span class="nx">then</span> <span class="nx">we</span> <span class="nb">defined</span> <span class="nx">an</span> <span class="nx">AND</span> <span class="nx">condition</span> <span class="nx">between</span> <span class="nx">our</span> <span class="nx">group</span> <span class="k">and</span> <span class="nx">that</span> <span class="nx">first</span> <span class="nx">entry</span> <span class="nx">item</span><span class="o">.</span></code></pre></figure>

<p>Lastly, we search.</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"> 
<span class="cp">&lt;?php</span>
<span class="nv">$searchParams</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">KalturaESearchEntryParams</span><span class="p">();</span>
<span class="nv">$searchParams</span><span class="o">-&gt;</span><span class="na">searchOperator</span> <span class="o">=</span> <span class="nv">$searchOperator</span><span class="p">;</span>
<span class="nv">$elasticsearchPlugin</span> <span class="o">=</span> <span class="nx">KalturaElasticSearchClientPlugin</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="nv">$client</span><span class="p">);</span>
<span class="nv">$searchResults</span> <span class="o">=</span> <span class="nv">$elasticsearchPlugin</span><span class="o">-&gt;</span><span class="na">eSearch</span><span class="o">-&gt;</span><span class="na">searchEntry</span><span class="p">(</span><span class="nv">$searchParams</span><span class="p">,</span> <span class="kc">null</span><span class="p">);</span></code></pre></figure>

<h3 id="results-7">Results</h3>

<figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
    </span><span class="nt">"totalCount"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nt">"objects"</span><span class="p">:[</span><span class="w">
        </span><span class="p">{</span><span class="w">
    </span><span class="nt">"object"</span><span class="p">:{</span><span class="w">
        </span><span class="nt">"name"</span><span class="p">:</span><span class="s2">"pasta bolognese"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"objectType"</span><span class="p">:</span><span class="s2">"KalturaMediaEntry"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"itemsData"</span><span class="p">:[</span><span class="w">
        </span><span class="p">{</span><span class="w">
        </span><span class="nt">"totalCount"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nt">"items"</span><span class="p">:[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nt">"line"</span><span class="p">:</span><span class="s2">"\u98df\u8c31"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"startsAt"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="nt">"endsAt"</span><span class="p">:</span><span class="mi">10000</span><span class="p">,</span><span class="w">
                </span><span class="nt">"language"</span><span class="p">:</span><span class="s2">"Chinese"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"captionAssetId"</span><span class="p">:</span><span class="s2">"0_5ifj0qhq"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"highlight"</span><span class="p">:[</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                        </span><span class="nt">"fieldName"</span><span class="p">:</span><span class="s2">"caption_assets.content.raw"</span><span class="p">,</span><span class="w">
                        </span><span class="nt">"hits"</span><span class="p">:[</span><span class="w">
                            </span><span class="p">{</span><span class="w">
                                </span><span class="nt">"value"</span><span class="p">:</span><span class="s2">"&lt;em&gt;\u98df\u8c31&lt;\/em&gt;"</span><span class="p">,</span><span class="w">
                                </span><span class="nt">"objectType"</span><span class="p">:</span><span class="s2">"KalturaString"</span><span class="w">
                            </span><span class="p">}</span><span class="w">
            </span><span class="err">...</span><span class="w">
    </span><span class="err">}</span><span class="p">,</span><span class="w">
</span><span class="p">{</span><span class="w">
    </span><span class="nt">"object"</span><span class="p">:{</span><span class="w">
        </span><span class="nt">"name"</span><span class="p">:</span><span class="s2">"delicious pasta recipe"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"objectType"</span><span class="p">:</span><span class="s2">"KalturaMediaEntry"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"highlight"</span><span class="p">:[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nt">"fieldName"</span><span class="p">:</span><span class="s2">"name"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"hits"</span><span class="p">:[</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="nt">"value"</span><span class="p">:</span><span class="s2">"delicious &lt;em&gt;pasta&lt;\/em&gt; recipe"</span><span class="p">,</span><span class="w">
                    </span><span class="nt">"objectType"</span><span class="p">:</span><span class="s2">"KalturaString"</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">],</span><span class="w">
        </span><span class="err">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nt">"itemsData"</span><span class="p">:[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nt">"totalCount"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nt">"items"</span><span class="p">:[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nt">"xpath"</span><span class="p">:</span><span class="s2">"\/* local-name()='metadata' \/* local-name()='Field1' "</span><span class="p">,</span><span class="w">
                </span><span class="nt">"metadataProfileId"</span><span class="p">:</span><span class="mi">653</span><span class="p">,</span><span class="w">
                </span><span class="nt">"metadataFieldId"</span><span class="p">:</span><span class="mi">668</span><span class="p">,</span><span class="w">
                </span><span class="nt">"valueText"</span><span class="p">:</span><span class="s2">"recipe"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"highlight"</span><span class="p">:[</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                    </span><span class="nt">"fieldName"</span><span class="p">:</span><span class="s2">"metadata.value_text.raw"</span><span class="p">,</span><span class="w">
                    </span><span class="nt">"hits"</span><span class="p">:[</span><span class="w">
                        </span><span class="p">{</span><span class="w">
                            </span><span class="nt">"value"</span><span class="p">:</span><span class="s2">"&lt;em&gt;recipe&lt;\/em&gt;"</span><span class="p">,</span><span class="w">
                            </span><span class="nt">"objectType"</span><span class="p">:</span><span class="s2">"KalturaString"</span><span class="w">
                        </span><span class="p">}</span><span class="w">
            </span><span class="err">...</span><span class="w">                  
</span><span class="err">}</span></code></pre></figure>

<p>If you’re interested in building search into your video experiences, the easy way to learn more about the eSearch API is by trying it out in the <a href="https://developer.kaltura.com/console/service/eSearch">console</a>.</p>

		
</article>


      </div>
    </div>

<!-- customer.io -->
<!--script type="text/javascript">
    var _cio = _cio || [];
    (function() {
      var a,b,c;a=function(f){return function(){_cio.push([f].
      concat(Array.prototype.slice.call(arguments,0)))}};b=["load","identify",
      "sidentify","track","page"];for(c=0;c<b.length;c++){_cio[b[c]]=a(b[c])};
      var t = document.createElement('script'),
          s = document.getElementsByTagName('script')[0];
      t.async = true;
      t.id    = 'cio-tracker';
      t.setAttribute('data-site-id', 'd52b0167909beb4a2cf0');
      t.src = 'https://assets.customer.io/assets/track.js';
      s.parentNode.insertBefore(t, s);
    })();
  </script-->
  <!-- marketo -->
  <script type="text/javascript">
(function() {
  var didInit = false;
  function initMunchkin() {
    if(didInit === false) {
      didInit = true;
      Munchkin.init('984-SDM-859');
    }
  }
  var s = document.createElement('script');
  s.type = 'text/javascript';
  s.async = true;
  s.src = 'https://munchkin.marketo.net/munchkin.js';
  s.onreadystatechange = function() {
    if (this.readyState == 'complete' || this.readyState == 'loaded') {
      initMunchkin();
    }
  };
  s.onload = initMunchkin;
  document.getElementsByTagName('head')[0].appendChild(s);
})();
</script>

<!--script type="text/javascript" src="https://s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5745bb1095edd5f5"></script-->
